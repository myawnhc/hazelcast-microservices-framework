# A/B Test Configuration Profile: Multi-Replica Order Service with Clustering
#
# Runs 3 order-service replicas forming a per-service embedded Hazelcast cluster
# via TCP-IP discovery. An nginx load balancer distributes HTTP requests across
# all 3 replicas. Inventory and payment services remain single-replica.
#
# This is the primary test for ADR 013 â€” validates that same-service replicas
# sharing an embedded cluster achieve linear throughput scaling.
#
# Memory: ~11.6GB total (base ~7.3GB + 2 extra order-service @ 1536M + nginx)
# Requires 16GB host.
#
# Compare against single-replica-clustered.conf to measure scaling gain.
# Compare against community-baseline.conf for total impact assessment.

NAME=multi-replica-clustered
DESCRIPTION=3x order-service replicas with embedded clustering + nginx LB
COMPOSE_FILES=docker-compose.yml,docker-compose.clustered.yml,docker-compose.multi-replica.yml
ENV_OVERRIDES=
SPRING_PROFILES=
K6_SCENARIO=constant
K6_TPS=100
K6_DURATION=3m
PRE_HOOK=
POST_HOOK=
MEMORY_LIMIT=
NOTES=3 order-service replicas clustered via TCP-IP on port 5801. Nginx LB round-robins requests. Jet distributes pipeline processing. Outbox CAS prevents duplicate delivery. Watch: outbox.entries.claimed, outbox.claims.released, Jet job restarts.
