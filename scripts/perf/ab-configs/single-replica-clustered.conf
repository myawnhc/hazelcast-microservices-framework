# A/B Test Configuration Profile: Single Replica with Clustering Enabled
#
# Measures the overhead of the per-service embedded clustering code path
# (CAS-based outbox claiming, Jet AT_LEAST_ONCE snapshots, stale-claim sweeping)
# on a single replica. No actual multi-member distribution occurs â€” each service
# is a cluster-of-1 but exercises the full claiming/sweeping logic.
#
# Compare against community-baseline.conf to quantify CAS overhead.
# Compare against multi-replica-clustered.conf to measure scaling gain.

NAME=single-replica-clustered
DESCRIPTION=Single replica with clustering code path enabled (CAS overhead test)
COMPOSE_FILES=docker-compose.yml,docker-compose.clustered.yml
ENV_OVERRIDES=
SPRING_PROFILES=
K6_SCENARIO=constant
K6_TPS=50
K6_DURATION=3m
PRE_HOOK=
POST_HOOK=
MEMORY_LIMIT=
NOTES=Clustering enabled but single replica per service. Measures CAS claiming + AT_LEAST_ONCE snapshot overhead vs baseline. Outbox ClaimEntryProcessor CAS always wins (no contention). Jet snapshots every 10s.
