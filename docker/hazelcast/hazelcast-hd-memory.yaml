# Hazelcast HD Memory Configuration
# Extends hazelcast-docker.yaml with native off-heap memory (Enterprise feature).
# Used by docker-compose-hd-memory.yml overlay.

hazelcast:
  cluster-name: ecommerce-cluster

  network:
    port:
      auto-increment: true
      port: 5701

    join:
      multicast:
        enabled: false
      tcp-ip:
        enabled: true
        member-list:
          - hazelcast-1
          - hazelcast-2
          - hazelcast-3

    rest-api:
      enabled: true
      endpoint-groups:
        CLUSTER_READ:
          enabled: true
        CLUSTER_WRITE:
          enabled: true
        HEALTH_CHECK:
          enabled: true

  jet:
    enabled: true

  # HD Memory (native off-heap) configuration
  native-memory:
    enabled: true
    size:
      unit: MEGABYTES
      value: 256
    allocator-type: STANDARD

  map:
    "*_PENDING":
      backup-count: 1
      in-memory-format: NATIVE
      event-journal:
        enabled: true
        capacity: 10000

    "*_ES":
      backup-count: 1
      in-memory-format: NATIVE
      eviction:
        eviction-policy: NONE

    "*_VIEW":
      backup-count: 1
      in-memory-format: NATIVE
      read-backup-data: true

    "*_COMPLETIONS":
      backup-count: 1
      in-memory-format: NATIVE
      time-to-live-seconds: 3600
