replicaCount: 1

image:
  repository: hazelcast-microservices/payment-service
  tag: "latest"
  pullPolicy: IfNotPresent

# Image pull secrets (for private registries like ECR)
imagePullSecrets: []

service:
  type: ClusterIP
  port: 8084

# JVM configuration
jvm:
  xms: "256m"
  xmx: "512m"
  opts: "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0"

# Spring configuration
spring:
  profiles: "kubernetes"

# Hazelcast client connection (to shared cluster)
hazelcast:
  clusterName: "ecommerce-cluster"
  port: 5701

# Persistence (PostgreSQL) — disabled by default; enable when a database is available
persistence:
  enabled: false
  # datasourceUrl: "jdbc:postgresql://postgres:5432/ecommerce"
  # datasourceUsername: "postgres"
  # datasourcePassword: "postgres"

# OpenTelemetry / tracing
tracing:
  enabled: true
  endpoint: "http://jaeger:4317"

# Health probes (Spring Boot Actuator)
probes:
  startup:
    initialDelaySeconds: 30
    periodSeconds: 10
    failureThreshold: 12
    timeoutSeconds: 5
  liveness:
    initialDelaySeconds: 0
    periodSeconds: 30
    failureThreshold: 3
    timeoutSeconds: 5
  readiness:
    initialDelaySeconds: 0
    periodSeconds: 10
    failureThreshold: 3
    timeoutSeconds: 5

# Init container — wait for Hazelcast cluster before starting
initContainers:
  waitForHazelcast:
    enabled: true
    image: busybox:1.36

# Horizontal Pod Autoscaler (requires metrics-server)
autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 5
  targetCPUUtilizationPercentage: 70
  # targetMemoryUtilizationPercentage: 80

# Pod Disruption Budget (useful when replicas > 1)
podDisruptionBudget:
  enabled: false
  maxUnavailable: 1

# Resource management
resources:
  requests:
    memory: "384Mi"
    cpu: "250m"
  limits:
    memory: "1Gi"
    cpu: "1000m"

# Service account
serviceAccount:
  create: true
  name: ""
  annotations: {}

# Pod scheduling
podAnnotations: {}
podSecurityContext: {}
securityContext: {}
nodeSelector: {}
tolerations: []
affinity: {}

# Per-service embedded Hazelcast clustering (ADR 013)
# When enabled, replicas of this service form their own embedded Hazelcast cluster
# for distributed Jet pipeline processing. Disabled by default (standalone mode).
embeddedClustering:
  enabled: false
  port: 5801
