# =============================================================================
# AWS EKS Values â€” Small Tier (Proof of Concept)
# =============================================================================
#
# Target: 2x t3.xlarge (4 vCPU, 16GB each)
# Cost:   ~$0.76/hr ($0.33/hr x2 nodes + $0.10 EKS control plane)
# Use:    Smoke testing, baseline benchmarks, quick demos
#
# Deploy: helm install demo k8s/hazelcast-microservices/ \
#           -f k8s/hazelcast-microservices/values-aws-small.yaml \
#           -n hazelcast-demo
# =============================================================================

# --- Hazelcast Cluster ---
hazelcast-cluster:
  replicaCount: 3
  image:
    pullPolicy: Always
  jvm:
    xms: "1g"
    xmx: "1g"
    gcOpts: "-XX:+UseG1GC"
  resources:
    requests:
      memory: "1536Mi"
      cpu: "500m"
    limits:
      memory: "2Gi"
      cpu: "2000m"
  rbac:
    create: true
  podDisruptionBudget:
    enabled: true
    minAvailable: 2

# --- Account Service ---
account-service:
  replicaCount: 1
  image:
    pullPolicy: Always
  jvm:
    xms: "512m"
    xmx: "768m"
    opts: "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:+UseG1GC"
  resources:
    requests:
      memory: "768Mi"
      cpu: "250m"
    limits:
      memory: "1536Mi"
      cpu: "1000m"
  persistence:
    enabled: false
  autoscaling:
    enabled: false
  podDisruptionBudget:
    enabled: false

# --- Inventory Service ---
inventory-service:
  replicaCount: 1
  image:
    pullPolicy: Always
  jvm:
    xms: "512m"
    xmx: "768m"
    opts: "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:+UseG1GC"
  resources:
    requests:
      memory: "768Mi"
      cpu: "250m"
    limits:
      memory: "1536Mi"
      cpu: "1000m"
  persistence:
    enabled: false
  autoscaling:
    enabled: false
  podDisruptionBudget:
    enabled: false

# --- Order Service ---
order-service:
  replicaCount: 1
  image:
    pullPolicy: Always
  jvm:
    xms: "512m"
    xmx: "768m"
    opts: "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:+UseG1GC"
  resources:
    requests:
      memory: "768Mi"
      cpu: "250m"
    limits:
      memory: "1536Mi"
      cpu: "1000m"
  persistence:
    enabled: false
  autoscaling:
    enabled: false
  podDisruptionBudget:
    enabled: false

# --- Payment Service ---
payment-service:
  replicaCount: 1
  image:
    pullPolicy: Always
  jvm:
    xms: "512m"
    xmx: "768m"
    opts: "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:+UseG1GC"
  resources:
    requests:
      memory: "768Mi"
      cpu: "250m"
    limits:
      memory: "1536Mi"
      cpu: "1000m"
  persistence:
    enabled: false
  autoscaling:
    enabled: false
  podDisruptionBudget:
    enabled: false

# --- API Gateway ---
api-gateway:
  replicaCount: 1
  image:
    pullPolicy: Always
  ingress:
    enabled: true
    className: "alb"
    annotations:
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/healthcheck-path: /actuator/health
    hosts:
      - host: ""
        paths:
          - path: /
            pathType: Prefix
  resources:
    requests:
      memory: "128Mi"
      cpu: "125m"
    limits:
      memory: "256Mi"
      cpu: "500m"

# --- MCP Server ---
mcp-server:
  enabled: false

# --- Monitoring ---
monitoring:
  enabled: false
