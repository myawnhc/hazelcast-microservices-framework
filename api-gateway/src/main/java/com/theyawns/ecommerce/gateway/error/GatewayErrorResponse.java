package com.theyawns.ecommerce.gateway.error;

import java.time.Instant;

/**
 * Immutable error response DTO returned by the gateway for downstream failures.
 *
 * <p>Extends the service-level error pattern with gateway-specific fields
 * ({@code correlationId}, {@code path}) for tracing and debugging.
 *
 * @author Generated by Claude Code
 * @since 1.0
 */
public class GatewayErrorResponse {

    private final int status;
    private final String errorCode;
    private final String message;
    private final String correlationId;
    private final String path;
    private final Instant timestamp;

    /**
     * Creates a new gateway error response.
     *
     * @param status HTTP status code
     * @param errorCode machine-readable error code (e.g., "SERVICE_UNAVAILABLE")
     * @param message human-readable error message
     * @param correlationId the correlation ID from the request, may be null
     * @param path the request path, may be null
     */
    public GatewayErrorResponse(final int status, final String errorCode, final String message,
                                final String correlationId, final String path) {
        this.status = status;
        this.errorCode = errorCode;
        this.message = message;
        this.correlationId = correlationId;
        this.path = path;
        this.timestamp = Instant.now();
    }

    /**
     * Returns the HTTP status code.
     *
     * @return the status code
     */
    public int getStatus() {
        return status;
    }

    /**
     * Returns the machine-readable error code.
     *
     * @return the error code
     */
    public String getErrorCode() {
        return errorCode;
    }

    /**
     * Returns the human-readable error message.
     *
     * @return the message
     */
    public String getMessage() {
        return message;
    }

    /**
     * Returns the correlation ID from the request, or null if unavailable.
     *
     * @return the correlation ID, may be null
     */
    public String getCorrelationId() {
        return correlationId;
    }

    /**
     * Returns the request path, or null if unavailable.
     *
     * @return the request path, may be null
     */
    public String getPath() {
        return path;
    }

    /**
     * Returns the timestamp when this error response was created.
     *
     * @return the timestamp
     */
    public Instant getTimestamp() {
        return timestamp;
    }
}
