package com.theyawns.framework.resilience;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

/**
 * Tests for {@link ResilienceException}.
 *
 * @author Generated by Claude Code
 * @since 3.0
 */
@DisplayName("ResilienceException - Exception with diagnostic context")
class ResilienceExceptionTest {

    @Test
    @DisplayName("should preserve operation name and cause")
    void shouldPreserveOperationNameAndCause() {
        final RuntimeException cause = new RuntimeException("underlying failure");
        final ResilienceException exception = new ResilienceException(
                "Operation failed", "orderSaga", cause);

        assertThat(exception.getOperationName()).isEqualTo("orderSaga");
        assertThat(exception.getMessage()).isEqualTo("Operation failed");
        assertThat(exception.getCause()).isSameAs(cause);
    }

    @Test
    @DisplayName("should support construction without cause")
    void shouldSupportConstructionWithoutCause() {
        final ResilienceException exception = new ResilienceException(
                "Circuit breaker open", "paymentListener");

        assertThat(exception.getOperationName()).isEqualTo("paymentListener");
        assertThat(exception.getMessage()).isEqualTo("Circuit breaker open");
        assertThat(exception.getCause()).isNull();
    }
}
