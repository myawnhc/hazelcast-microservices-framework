package com.theyawns.framework.event;

import com.theyawns.framework.domain.DomainObject;

import java.util.function.Consumer;

/**
 * Interface for subscribing to domain events from the event bus.
 * Implementations handle the actual subscription mechanism (e.g., Hazelcast topics).
 *
 * <p>Subscribers are responsible for:
 * <ul>
 *   <li>Registering interest in specific event types or topics</li>
 *   <li>Delivering events to registered handlers</li>
 *   <li>Managing subscription lifecycle</li>
 * </ul>
 *
 * @param <D> The domain object type
 * @param <K> The key type of the domain object
 * @author Generated by Claude Code
 * @since 1.0
 */
public interface EventSubscriber<D extends DomainObject<K>, K> {

    /**
     * Subscribes to events with the given handler.
     * The handler will be called for each event received.
     *
     * @param handler the consumer to handle received events
     * @return a subscription ID that can be used to unsubscribe
     */
    String subscribe(Consumer<DomainEvent<D, K>> handler);

    /**
     * Subscribes to events of a specific type.
     *
     * @param eventType the event type to filter on
     * @param handler the consumer to handle received events
     * @return a subscription ID that can be used to unsubscribe
     */
    String subscribe(String eventType, Consumer<DomainEvent<D, K>> handler);

    /**
     * Unsubscribes using the subscription ID.
     *
     * @param subscriptionId the ID returned from subscribe()
     * @return true if successfully unsubscribed, false if subscription was not found
     */
    boolean unsubscribe(String subscriptionId);

    /**
     * Returns the topic name this subscriber listens to.
     *
     * @return the topic name
     */
    String getTopicName();
}